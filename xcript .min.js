//xcript.js @Raoul Bivolaru
!function(e,t){if(!t)return!1;var r={enter:13,ctrl:17,alt:18,shift:16,tab:9,escape:27,caps_lock:20,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40},n={mobile:"(max-width : 479px)",tablet:"(min-width : 480px) and (max-width : 1023px)",desktop:"(min-width : 1024px)"},i=function(e){return new i.init(e)};i.prototype={addClassIfNot:function(e){return this.selector.hasClass(e)||this.selector.addClass(e),this},removeClassIfExist:function(e){return this.selector.hasClass(e)&&this.selector.removeClass(e),this},removeClassAddClass:function(e,t){return this.selector.removeClass(e).addClass(t),this},toggleClassOnHover:function(e){var t=this.selector;t.hover(function(){t.addClass(e)},function(){t.removeClass(e)})},ifExist:function(){return 0!==this.selector.length},onPrevent:function(e,t){this.selector.on(e,function(e){return e.preventDefault(),e.stopImmediatePropagation(),t?t():void 0})},scrollToElement:function(e){var r=e||0,n=this.selector;n.queue(function(){t("html, body").animate({scrollTop:n.offset().top-r},500),t(this).dequeue()})},slideFadeToggle:function(e,r,n){$this=this.selector,$this.queue(function(){$this.animate({opacity:"toggle",height:"toggle"},e,r,n),t(this).dequeue()})},disableScrollOutside:function(){this.selector.on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent,r=t.wheelDelta||-t.detail;this.scrollTop+=30*(0>r?1:-1),e.preventDefault()})},renderDateToLocal:function(){var e=new Date(this.selector.text()),t=(new Date).getTimezoneOffset(),r=Math.abs(t),n=Math.floor(r/60),i=0>t?"-":"+";e.setHours("-"===i?e.getHours()+n:e.getHours()-n);var o={month:e.getMonth()<10?"0"+(e.getMonth()+1):e.getMonth()+1,day:e.getDate()<10?"0"+e.getDate():e.getDate(),hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()};return this.selector.html(o.month+"/"+o.day+"/"+e.getFullYear()+" "+o.hours+":"+o.minutes+":"+o.seconds)},fileUpload:function(e,t){this.selector.on("change",function(){if(this.files&&this.files[0]){var r=this.files[0];if(t&&r.size>1048576*t)return!1;var n=new FileReader;n.onload=function(t){e(t.target)},n.readAsDataURL(r)}})},prependToInput:function(e){t("body").on({"focus input":function(){var r=t(this);-1==r.val().indexOf(e)&&r.val(function(t,r){return r==e?e+r:e})},blur:function(){var r=t(this);r.val()===e&&r.val("")}},this.selector)},changeWidthOrHeight:function(e,r,n){var i=e||"",o=r||"",s=t(n)||"";return(i||s)&&this.selector.width(function(){return i?i:s.width()}),(o||s)&&this.selector.height(function(){return o?o:s.height()}),this},setSameSize:function(e,r){var n=r||!1,i=this.selector.find(e),o=Math.max.apply(null,i.map(function(){var e=t(this);return n?e.height():e.width()}).get());n?i.height(o):i.width(o)},limitChars:function(e,t){var r=this.selector.text();return r.length>e&&this.selector.html(r.substring(t?t:0,e)),this},clearFileInput:function(){this.selector.replaceWith(this.selector.val("").clone(!0))},getNativeImage:function(){var e=new Image;return e.src=this.selector.attr("src"),{width:e.width,height:e.height}},loader:function(e,r){var n=this.selector,i=r||{},o=function(){this.src=i.hasOwnProperty("src")?i.src:"",this.wrapperClass=i.wrapper||"x-loader-wrapper",this.imageClass=i.image||"x-loader"};o.prototype={show:function(){n.append('<div class="'+this.wrapperClass+'"><img src="'+this.src+'" alt="" class="'+this.imageClass+'"></div>')},hide:function(){n.find("."+this.wrapperClass).fadeOut().remove()},enable:function(){n.removeAttr("disabled").removeClass("disabled")},disable:function(){n.attr("disabled","disabled").addClass("disabled")},hideAll:function(){t("."+this.wrapperClass).fadeOut().remove()}};var s=new o;return s[e]()},calculateDistance:function(e,t){var r=this.selector;return Math.floor(Math.sqrt(Math.pow(e-(r.offset().left+r.width()/2),2)+Math.pow(t-(r.offset().top+r.height()/2),2)))}},i.onKeyPress=function(n,i,o,s){r.hasOwnProperty(i)&&t(e).on(n,function(e){s&&e.preventDefault(),e.keyCode===r[i]&&o&&o()})},i.getIEVersion=function(){var t=e.navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):!1},i.getSum=function(e){return e.reduce(function(e,t){return e+t},0)},i.modernizr=function(r,i,o){if(e.Modernizr){e.screenType="";var s=function(){e.Modernizr.mq(n.mobile)&&"mobile"!=e.screenType?(e.screenType="mobile",r&&r()):e.Modernizr.mq(n.tablet)&&"tablet"!=e.screenType?(e.screenType="tablet",i&&i()):e.Modernizr.mq(n.mobile)||e.Modernizr.mq(n.tablet)||"desktop"==e.screenType||(e.screenType="desktop",o&&o())};s(),x.debounce(t(e).on("resize",function(){s()}),100)}},i.formatNumber=function(e,t){e+="";for(var r=t||"",n=e.split("."),i=n[0],o=n.length>1?"."+n[1]:"",s=/(\d+)(\d{3})/;s.test(i);)i=i.replace(s,"$1,$2");return r+i+o},i.poll=function(e,r,n){var i=new t.Deferred,o=Number(new Date)+(r||2e3),s=n||100;return function a(){e()?i.resolve():Number(new Date)<o?setTimeout(a,s):i.reject(new Error("timed out for "+e+": "+arguments))}(),i.promise},i.getAbsoluteUrl=function(){var e;return function(t){return e||(e=document.createElement("a")),e.href=t,e.href}}(),i.rand=function(e,t,r){var n=Math.random()*(t-e)+e;return r?0|n:n},i.once=function(e,t){var r;return function(){return e&&(r=e.apply(t||this,arguments),e=null),r}},i.getURLParameter=function(e){for(var t=window.location.search.substring(1),r=t.split("&"),n=0;n<r.length;n++){var i=r[n].split("=");if(i[0]==e)return i[1]}},i.debounce=function(e,t){var r,n,i,o;return function(){i=this,n=[].slice.call(arguments,0),o=new Date;var s=function(){var a=new Date-o;t>a?r=setTimeout(s,t-a):(r=null,e.apply(i,n))};r||(r=setTimeout(s,t))}},i.mapToArray=function(e,t){for(var r=[],n=0;n<e.length;n++)r.push(t(e[n]));return r},i.removeDuplicates=function(e){for(var t=0,r=e.length;r>t;){var n=e[t];for(k=r;k>t;k--)e[k]===n&&e.splice(k,1);t++}return e},i.createMenu=function(e,t){for(var r,n,i=t||["ul","li"],o=i[0],s=i[1],a=0,l=e.length;l>a;a++)r=e[a],/:/.test(r)&&(r=e[a].split(":")[0],n=e[a].split(":")[1]),e[a]="<"+s+" "+(n&&'value="'+n+'"')+">"+r+"</"+s+">";return"<"+o+">"+e.join("")+"</"+o+">"},i.ajax=function(e,r,n,i){return t.ajax({url:e,method:r,type:n,data:i})},i.init=function(e){this.selector=t(e)},i.init.prototype=i.prototype,e.xcript=e.x=i}(window,$);